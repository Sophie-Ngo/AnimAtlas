<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>AnimAtlas</title>
    <link href="favicon.png" rel="icon" type="image/x-icon">
    <!-- <link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
    <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    <script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script> -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <script src="https://unpkg.com/@googlemaps/markerclusterer/dist/index.min.js"></script>
    <link rel="stylesheet" type="text/css" href="./style.css" />
    <script type="module" src="./index.js"></script>
    <script src="//d3js.org/d3.v3.min.js"></script>
    <!-- <script async
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDAACd_oTrV0i8LlICe3P_oOhOTTwwoQaw&libraries=visualization">
    </script> -->
    <link rel="stylesheet/less" type="text/css" href="styles.less" />
    <script src="https://cdn.jsdelivr.net/npm/less" ></script>
  </head>
  <body>

  <div id="loader"></div>

  <div id="closebtn">
    <button onclick="closeNav()">x</button>
    <button onclick="openNav()"> open </button>
  </div>

  <div id="sidenav" class="sidenav">
   <div class="tab">
     <button id="help_button" class="tablinks active">Help</button>
     <button id="details_button" class="tablinks">Details</button> 
     <button id="search_button" class="tablinks">Search</button>
     <button id="visualization_button" class="tablinks">Visualization</button>
   </div>

  <!-- <h1>AnimAtlas ðŸ¦–ðŸŒŽðŸ¦•</h1> -->
<div class="sidenavcontent">
  <div id="Details" class="tabcontent">
    <div id="info">
    </div>

    <!-- chatbase ai -->
    <!-- <iframe
    src="https://www.chatbase.co/chatbot-iframe/nWfjMlmx-VQfIwjr8GHf1"
    width="100%"
    style="height: 100%; width:100%; min-height: 400px; display: none"
    frameborder="0"
    id="chatbot"
    ></iframe> -->


  </div>
  
  <div id="Search" class="tabcontent">
      <p>All fields are optional.</p>
      <p style='color: grey'>(Tip: Hover over orange text for more info!)</p>
      <p><b class="tooltip">Name: <span class="tooltiptext">Taxonomic name of the organisms you wish to search for. This can be any name of any rank. For example, 'Dinosauria' will find all dinosaur fossils, while 'Tyrannosaurus Rex' will only find Tyrannosaurus Rex fossils. <br>
      <br>Don't know what to search? Try some of these for starters: <br><br>&nbsp&nbspFelidae (all cats)<br>&nbsp&nbspHomo (humans and human relatives)<br>&nbsp&nbspHomo sapiens (humans only)</span></b>
      <br><input type="text" id="namequery" class="searchquery"></p>
      <p><b class="tooltip">Min MA: <span class="tooltiptext">The maximum estimated million years ago that an organism lived.</span></b>
      <br><input type="text" id="minrangequery" class="searchquery"></p>
      <p><b class="tooltip">Max MA: <span class="tooltiptext">The minimum estimated million years ago that an organism lived.</span></b>
      <br><input type="text" id="maxrangequery" class="searchquery"></p>
      <p><b class="tooltip">Limit: <span class="tooltiptext">Limit the number of fossil occurrences in the new data. If the load time is slow, consider lowering this number.</span></b>
      <br><input type="text" id="limitquery" class="searchquery"></p>
      <!-- Update button -->
      <button class="button button1" id="updateBtn">Update</button>
  </div>
  
  <div id="Help" class="tabcontent">
    <h1>What is AnimAtlas?</h1>
    
    <h4> Get Started with a Tutorial </h4>
    <button id="trex_button" class="button">Tyrannosaurus Rex</button>

    <p> AnimAtlas allows you to explore fossil discoveries that have been recorded in the <a href='https://paleobiodb.org/'>Paleobiology Database.</a> </p>  
    <p>Each dot on the map represents a fossil occurrence. What is a fossil occurence, you may ask? </p>  
    <p>A <b>fossil occurrence</b> represents a taxon (for example, a species or genus) whose fossils are recorded at a specific place and a specific geological time. It may consist of   
    more than one fossil. Each occurrence has been described in a publication,  
    which helps us gain information about it. Besides time range, researchers also store information such as the condition of the fossils, the habits of the organism,   
    and data about the surrounding geography. </p> 

    <h4>Things to do</h4> 
    <list>
      <li>You can click on any of the dots on the map to learn more about each fossil occurrence. </li>  
      <li>Use the search bar to specify what appears on the map.</li> 
      <li>Play with the time range slider to see what organisms lived during different time periods!</li>
      <li>Do the tutorial!</li></list> 

    <br> <p> To return to this page at any time, click the 'Help' button at the top of the page. </p> 
  </div>

  <div id="Visualization" class="tabcontent">
    <p> Select an option below to view the data differently! </p>
    <span style="line-height: 1.6">
    <input type="radio" id="points" class="vizbutton" name="vizbutton" value="points" checked="checked">
    <span class="tooltip"><label for="html">Points<span class="tooltiptext">Displays all current data as individual points.</span></label></span><br>
     <input type="radio" id="clusters" class="vizbutton" name="vizbutton" value="cluster">
     <span class="tooltip"><label for="html">Clusters<span class="tooltiptext">Displays data as points, but groups together points that are too close to each other. </span></label></span><br>
     <input type="radio" id="heatmap" class="vizbutton" name="vizbutton" value="heatmap">
     <span class="tooltip"><label for="html">Heatmap<span class="tooltiptext">Displays data as a heatmap, which shows where fossils are the most abundant for the current dataset.</span></label></span><br>
    </span>
  </div>

  <div id="Tyrannosaurus Rex" class="tabcontent">

    <a class="backtohelp"> Back to Help</a>

    <h1> Tutorial: Tyrannosaurus Rex </h1>
    <p> Tyrannosaurus Rex is one of the most famous dinosaurs. It lived during the Late Cretaceous period, about 68 to 66 million years ago. It lived in what is now North America.
      But what does its range in North America look like? 
    </p>
    <p> To find out, let's see where Tyrannosaurus Rex fossils have been found! </p>
    <button id="trex_action" class="button">Click here to see its fossils!</button>

    <p>Or, if you want to do it yourself:</p>
    <list>
      <li>Click on the 'Search' tab.</li>
      <li>Type 'Tyrannosaurus Rex' into the search bar.</li>
      <li>Click the 'Update' button.</li>
    </list>

    <p> You should see a map with a bunch of dots on it. Each dot represents a fossil occurrence. </p>
    <p> Click on one of the dots to learn more about that fossil occurrence. </p>
    <p> You can also use the time range slider to see which T. Rex occurrences lived during different time periods! </p>
    <p> To return to this page at any time, click the 'Help' button at the top of the page. </p> 
    <p> Have fun! </p>

    </div>

  </div> 
</div>
    
   
  <!-- Map and Menu Container -->
   <!-- <div id="wrapper"> -->

      <!-- Map -->
      <div id="mainmap"></div>  

    <!-- </div> -->

  <div id="footer" class="footer">

    <div class="multi-range">
      <span style="width: 350px; float:left; padding: 5px; text-align:center; background-color: #ff776e;">
        <h2><span id="minrange"></span><span id="maxrange"></span></h2>
      </span>
      <input type="range" min="0", max="100", value="0", id="upper" name="upper">
      <output for="upper" onforminput="value = upper.valueAsNumber;"></output>
      <input type="range" min="0", max="100", value="0", id="lower", name="lower">
      <output for="lower" onforminput="value = lower.valueAsNumber;"></output>
    </div>
  </div>

  </body>
  <script>(g => {
    var h, a, k, p = "The Google Maps JavaScript API",
        c = "google",
        l = "importLibrary",
        q = "__ib__",
        m = document,
        b = window;
    b = b[c] || (b[c] = {});
    var d = b.maps || (b.maps = {}),
        r = new Set,
        e = new URLSearchParams,
        u = () => h || (h = new Promise(async (f, n) => {
            await (a = m.createElement("script"));
            e.set("libraries", [...r] + "");
            for (k in g) e.set(k.replace(/[A-Z]/g, t => "_" + t[0].toLowerCase()), g[k]);
            e.set("callback", c + ".maps." + q);
            a.src = `https://maps.${c}apis.com/maps/api/js?` + e;
            d[q] = f;
            a.onerror = () => h = n(Error(p + " could not load."));
            a.nonce = m.querySelector("script[nonce]")?.nonce || "";
            m.head.append(a)
        }));
    d[l] ? console.warn(p + " only loads once. Ignoring:", g) : d[l] = (f, ...n) => r.add(f) && u().then(() => d[l](f, ...n))
})
({
    key: "AIzaSyDAACd_oTrV0i8LlICe3P_oOhOTTwwoQaw",
    v: "weekly"
});</script>

<script>
  function closeNav() {
      document.getElementById("closebtn").style.marginLeft = "0";
      document.getElementById("sidenav").style.display = "none";
      document.getElementById("mainmap").style.marginLeft = "0";
      document.getElementById("mainmap").style.width = "100%";
      document.getElementById("footer").style.marginLeft = "0";
      document.getElementById("footer").style.width = "100%";
    }

    function openNav() {
      document.getElementById("closebtn").style.marginLeft = "max(350px, 23%)";
      document.getElementById("sidenav").style.display = "";
      document.getElementById("mainmap").style.marginLeft = "max(350px, 23%)";
      document.getElementById("mainmap").style.width = "80%";
      document.getElementById("footer").style.marginLeft = "max(350px, 23%)";
      document.getElementById("footer").style.width = "min(80%)";
    }
</script>
</html>